<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Profil Utilisateur</title>
        <!-- profil style -->
        <link rel="stylesheet" href="./css/profil.css"/>
        <script src="../../js_class/user.js"></script>
        <!-- navbar style -->
        <link rel="stylesheet" href="../../dashboard/css/style.css" />
        <link rel="stylesheet" href="../../dashboard/css/indicator.css" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
    </head>

    <body>
        <div class="profile-container">

            <!-- Start Navbar -->            
            <nav class="navbar">
                <div class="gestion-button-navbar">
                    <button class="nav-btn dashboard-btn" onclick="location.href = '../../dashboard/dashboard.html';">
                        <i class="fa-solid fa-house"></i>Dashboard </button>
                    <button class="nav-btn project-btn" onclick="location.href = '../projet/projet.html';">
                        <i class="fa-regular fa-folder-closed"></i>Projet </button>
                    <button class="nav-btn calendar-btn">
                        <i class="fa-regular fa-calendar"></i>Calendriers </button>
                </div>
                <div class="settings">
                    <button class="settings-btn">
                        <i class="fa-solid fa-gear"></i>
                    </button>
                    <button class="profil-btn" onclick="location.href = './profil.html';">
                        <i class="fa-solid fa-user"></i>
                    </button>
                </div>
            </nav>
            <!-- End Navbar -->

            <h1>Profil Utilisateur</h1>
            <div id="profile-info" class="profile-info"></div>
            <button class="logout-btn" onclick="window.location.href = '../../logout/logout.php';"> Déconnexion </button>
        </div>
        <script>
            (async () => {
                if (typeof User === "undefined") {
                    console.error("La classe User n'est pas définie.");
                    return;
                }
                const currentUser = await User.fetchUserData();
                if (currentUser) {
                    // Afficher les informations utilisateur dans le div
                    const profileInfoDiv = document.getElementById("profile-info");
                    profileInfoDiv.innerHTML = `
            
			<div>
				<strong>Nom :</strong> ${currentUser.nom}
			</div>
			<div>
				<strong>Prénom :</strong> ${currentUser.prenom}
			</div>
			<div>
				<strong>Email :</strong> ${currentUser.email}
			</div>
			<div>
				<strong>Rôle :</strong> ${currentUser.role}
			</div>
          `;
                } else {
                    console.log("Aucun utilisateur connecté.");
                }
            })();
        </script>
        <script src="https://kit.fontawesome.com/cd0d448035.js" crossorigin="anonymous"></script>
    </body>
</html>