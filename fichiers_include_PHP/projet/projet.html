<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Profil Utilisateur</title>
        <!-- projet style -->
        <link rel="stylesheet" href="./css/projet.css" />
        <script src="../../js_class/project.js"></script>
        <!-- navbar style -->
        <link rel="stylesheet" href="../../dashboard/css/style.css" />
        <link rel="stylesheet" href="../../dashboard/css/indicator.css" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
    </head>
    <body>
        <div class="profile-container">
            <!-- Start Navbar -->
            <nav class="navbar">
                <div class="gestion-button-navbar">
                    <button class="nav-btn dashboard-btn" onclick="location.href = '../../dashboard/dashboard.html';">
                        <i class="fa-solid fa-house"></i>Dashboard </button>
                    <button class="nav-btn project-btn" onclick="location.href = './projet.html';">
                        <i class="fa-regular fa-folder-closed"></i>Projet </button>
                    <button class="nav-btn calendar-btn">
                        <i class="fa-regular fa-calendar"></i>Calendriers </button>
                </div>
                <div class="settings">
                    <button class="settings-btn">
                        <i class="fa-solid fa-gear"></i>
                    </button>
                    <button class="profil-btn" onclick="location.href = '../profil/profil.html';">
                        <i class="fa-solid fa-user"></i>
                    </button>
                </div>
            </nav>
            <!-- End Navbar -->
            <h1>Projets utilisateur</h1>
            <div id="projects-list" class="projects-list">
                <!-- Les projets seront insérés ici -->
            </div>
        </div>
        <!-- Script pour afficher les projets liés à l'utilisateur connecté -->
        <script>
            (async () => {
                const projectsListDiv = document.getElementById("projects-list");
                const projects = await Project.fetchProjectData();
                if (projects && projects.length > 0) {
                    projects.forEach((project) => {
                        // Créer une ligne pour chaque projet
                        const projectDiv = document.createElement("div");
                        projectDiv.className = "project-item";
                        projectDiv.innerHTML = `
              
			<strong>Nom du projet:</strong> ${project.nom}
			<br>
				<strong>Description:</strong> ${project.description}
				<br>
					<strong>Date de début:</strong> ${project.dateDebut}
					<br>
						<strong>Date de fin:</strong> ${project.dateFin}
						<br>
							<strong>Chef de projet (ID):</strong> ${project.idChef}
							<br>
            `;
                        // Ajouter le projet à la liste
                        projectsListDiv.appendChild(projectDiv);
                    });
                } else {
                    projectsListDiv.innerHTML = " < p > Aucun projet trouvé. < /p>";
                }
            })();
        </script>
        <script src="https://kit.fontawesome.com/cd0d448035.js" crossorigin="anonymous"></script>
    </body>
</html>